import{V as u,f as h,P as l,R as d,W as f,E as p,C as y}from"./index-Dnfjscuv.js";var g=Object.defineProperty,P=Object.getOwnPropertyDescriptor,s=(e,t,o,n)=>{for(var a=n>1?void 0:n?P(t,o):t,i=e.length-1,m;i>=0;i--)(m=e[i])&&(a=(n?m(t,o,a):m(a))||a);return n&&a&&g(t,o,a),a};let r=class extends u{camera;crossorigin;streamingElement;cameraTransformStyle="";animating=!1;status="disconnected";cameraName="";cameraNameMenuItems=[];framesPerSecond=-1;rawCameraUrl="";onCamera(){this.stopPlayback(),this.checkPlayback()}get apiUrl(){return this.$typedState.config.apiUrl}get cameraStyle(){return{transform:this.cameraTransformStyle||void 0}}get autoRaiseFrameEvent(){return!0}createTransform(){const e=this.streamingElement,{rotation:t,flip_horizontal:o,flip_vertical:n}=this.camera,a=[],{clientWidth:i,clientHeight:m}=e,c=t===0||t===180||m===0||i===0?1:m<i?m/i:i/m;return(c!==1||o)&&a.push(`scaleX(${o?-c:c})`),(c!==1||n)&&a.push(`scaleY(${n?-c:c})`),t!==0&&a.push(`rotate(${t}deg`),a.join(" ")}updateCameraTransformStyle(){requestAnimationFrame(()=>{this.animating&&(this.streamingElement&&(this.cameraTransformStyle=this.createTransform(),this.autoRaiseFrameEvent&&this.$emit("frame",this.streamingElement)),this.updateCameraTransformStyle())})}created(){this.animating=!0,this.updateCameraTransformStyle()}mounted(){document.addEventListener("visibilitychange",this.checkPlayback,!1),this.checkPlayback()}beforeDestroy(){this.animating=!1,document.removeEventListener("visibilitychange",this.checkPlayback),this.stopPlayback()}checkPlayback(){document.hidden?this.stopPlayback():this.startPlayback()}buildAbsoluteUrl(e){const{origin:t}=new URL(document.URL);return new URL(e,t)}updateStatus(e){this.status=e}updateCameraName(e){this.cameraName=e}updateCameraNameMenuItems(e){this.cameraNameMenuItems=e}updateFramesPerSecond(e){this.framesPerSecond=e}updateRawCameraUrl(e){this.rawCameraUrl=e}startPlayback(){}stopPlayback(){}menuItemClick(e){h.debug("Menu item click",e)}};s([l({type:Object,required:!0})],r.prototype,"camera",2);s([l({type:String})],r.prototype,"crossorigin",2);s([d("streamingElement")],r.prototype,"streamingElement",2);s([f("camera")],r.prototype,"onCamera",1);s([p("update:status")],r.prototype,"updateStatus",1);s([p("update:camera-name")],r.prototype,"updateCameraName",1);s([p("update:camera-name-menu-items")],r.prototype,"updateCameraNameMenuItems",1);s([p("update:frames-per-second")],r.prototype,"updateFramesPerSecond",1);s([p("update:raw-camera-url")],r.prototype,"updateRawCameraUrl",1);r=s([y],r);export{r as C};
