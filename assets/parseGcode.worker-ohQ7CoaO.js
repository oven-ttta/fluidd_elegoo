(function(){"use strict";const ht=(t,e)=>t in e;var dt=typeof global=="object"&&global&&global.Object===Object&&global,gt=typeof self=="object"&&self&&self.Object===Object&&self,D=dt||gt||Function("return this")(),w=D.Symbol,V=Object.prototype,yt=V.hasOwnProperty,_t=V.toString,E=w?w.toStringTag:void 0;function mt(t){var e=yt.call(t,E),r=t[E];try{t[E]=void 0;var n=!0}catch{}var o=_t.call(t);return n&&(e?t[E]=r:delete t[E]),o}var bt=Object.prototype,vt=bt.toString;function wt(t){return vt.call(t)}var xt="[object Null]",St="[object Undefined]",Z=w?w.toStringTag:void 0;function G(t){return t==null?t===void 0?St:xt:Z&&Z in Object(t)?mt(t):wt(t)}function k(t){return t!=null&&typeof t=="object"}var Tt="[object Symbol]";function H(t){return typeof t=="symbol"||k(t)&&G(t)==Tt}function Ct(t,e){for(var r=-1,n=t==null?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}var I=Array.isArray,W=w?w.prototype:void 0,tt=W?W.toString:void 0;function et(t){if(typeof t=="string")return t;if(I(t))return Ct(t,et)+"";if(H(t))return tt?tt.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function F(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function Ot(t){return t}var Et="[object AsyncFunction]",It="[object Function]",Pt="[object GeneratorFunction]",zt="[object Proxy]";function Lt(t){if(!F(t))return!1;var e=G(t);return e==It||e==Pt||e==Et||e==zt}var U=D["__core-js_shared__"],rt=(function(){var t=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function Ft(t){return!!rt&&rt in t}var At=Function.prototype,Nt=At.toString;function Mt(t){if(t!=null){try{return Nt.call(t)}catch{}try{return t+""}catch{}}return""}var $t=/[\\^$.*+?()[\]{}|]/g,jt=/^\[object .+?Constructor\]$/,Rt=Function.prototype,Dt=Object.prototype,Gt=Rt.toString,kt=Dt.hasOwnProperty,Ht=RegExp("^"+Gt.call(kt).replace($t,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ut(t){if(!F(t)||Ft(t))return!1;var e=Lt(t)?Ht:jt;return e.test(Mt(t))}function Qt(t,e){return t?.[e]}function Q(t,e){var r=Qt(t,e);return Ut(r)?r:void 0}function Xt(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var Yt=800,qt=16,Bt=Date.now;function Jt(t){var e=0,r=0;return function(){var n=Bt(),o=qt-(n-r);if(r=n,o>0){if(++e>=Yt)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Kt(t){return function(){return t}}var A=(function(){try{var t=Q(Object,"defineProperty");return t({},"",{}),t}catch{}})(),Vt=A?function(t,e){return A(t,"toString",{configurable:!0,enumerable:!1,value:Kt(e),writable:!0})}:Ot,Zt=Jt(Vt),Wt=9007199254740991,te=/^(?:0|[1-9]\d*)$/;function nt(t,e){var r=typeof t;return e=e??Wt,!!e&&(r=="number"||r!="symbol"&&te.test(t))&&t>-1&&t%1==0&&t<e}function ee(t,e,r){e=="__proto__"&&A?A(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function ot(t,e){return t===e||t!==t&&e!==e}var re=Object.prototype,ne=re.hasOwnProperty;function oe(t,e,r){var n=t[e];(!(ne.call(t,e)&&ot(n,r))||r===void 0&&!(e in t))&&ee(t,e,r)}var st=Math.max;function se(t,e,r){return e=st(e===void 0?t.length-1:e,0),function(){for(var n=arguments,o=-1,s=st(n.length-e,0),a=Array(s);++o<s;)a[o]=n[e+o];o=-1;for(var i=Array(e+1);++o<e;)i[o]=n[o];return i[e]=r(a),Xt(t,this,i)}}var ie=9007199254740991;function ae(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ie}var le="[object Arguments]";function it(t){return k(t)&&G(t)==le}var at=Object.prototype,ce=at.hasOwnProperty,ue=at.propertyIsEnumerable,lt=it((function(){return arguments})())?it:function(t){return k(t)&&ce.call(t,"callee")&&!ue.call(t,"callee")},fe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pe=/^\w*$/;function he(t,e){if(I(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||H(t)?!0:pe.test(t)||!fe.test(t)||e!=null&&t in Object(e)}var P=Q(Object,"create");function de(){this.__data__=P?P(null):{},this.size=0}function ge(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var ye="__lodash_hash_undefined__",_e=Object.prototype,me=_e.hasOwnProperty;function be(t){var e=this.__data__;if(P){var r=e[t];return r===ye?void 0:r}return me.call(e,t)?e[t]:void 0}var ve=Object.prototype,we=ve.hasOwnProperty;function xe(t){var e=this.__data__;return P?e[t]!==void 0:we.call(e,t)}var Se="__lodash_hash_undefined__";function Te(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=P&&e===void 0?Se:e,this}function x(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}x.prototype.clear=de,x.prototype.delete=ge,x.prototype.get=be,x.prototype.has=xe,x.prototype.set=Te;function Ce(){this.__data__=[],this.size=0}function N(t,e){for(var r=t.length;r--;)if(ot(t[r][0],e))return r;return-1}var Oe=Array.prototype,Ee=Oe.splice;function Ie(t){var e=this.__data__,r=N(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Ee.call(e,r,1),--this.size,!0}function Pe(t){var e=this.__data__,r=N(e,t);return r<0?void 0:e[r][1]}function ze(t){return N(this.__data__,t)>-1}function Le(t,e){var r=this.__data__,n=N(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function O(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}O.prototype.clear=Ce,O.prototype.delete=Ie,O.prototype.get=Pe,O.prototype.has=ze,O.prototype.set=Le;var Fe=Q(D,"Map");function Ae(){this.size=0,this.__data__={hash:new x,map:new(Fe||O),string:new x}}function Ne(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function M(t,e){var r=t.__data__;return Ne(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Me(t){var e=M(this,t).delete(t);return this.size-=e?1:0,e}function $e(t){return M(this,t).get(t)}function je(t){return M(this,t).has(t)}function Re(t,e){var r=M(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function S(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}S.prototype.clear=Ae,S.prototype.delete=Me,S.prototype.get=$e,S.prototype.has=je,S.prototype.set=Re;var De="Expected a function";function X(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(De);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],s=r.cache;if(s.has(o))return s.get(o);var a=t.apply(this,n);return r.cache=s.set(o,a)||s,a};return r.cache=new(X.Cache||S),r}X.Cache=S;var Ge=500;function ke(t){var e=X(t,function(n){return r.size===Ge&&r.clear(),n}),r=e.cache;return e}var He=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ue=/\\(\\)?/g,Qe=ke(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(He,function(r,n,o,s){e.push(o?s.replace(Ue,"$1"):n||r)}),e});function Xe(t){return t==null?"":et(t)}function $(t,e){return I(t)?t:he(t,e)?[t]:Qe(Xe(t))}function Y(t){if(typeof t=="string"||H(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function Ye(t,e){e=$(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[Y(e[r++])];return r&&r==n?t:void 0}function qe(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}var ct=w?w.isConcatSpreadable:void 0;function Be(t){return I(t)||lt(t)||!!(ct&&t&&t[ct])}function Je(t,e,r,n,o){var s=-1,a=t.length;for(r||(r=Be),o||(o=[]);++s<a;){var i=t[s];r(i)?qe(o,i):o[o.length]=i}return o}function Ke(t){var e=t==null?0:t.length;return e?Je(t):[]}function Ve(t){return Zt(se(t,void 0,Ke),t+"")}function Ze(t,e){return t!=null&&e in Object(t)}function We(t,e,r){e=$(e,t);for(var n=-1,o=e.length,s=!1;++n<o;){var a=Y(e[n]);if(!(s=t!=null&&r(t,a)))break;t=t[a]}return s||++n!=o?s:(o=t==null?0:t.length,!!o&&ae(o)&&nt(a,o)&&(I(t)||lt(t)))}function tr(t,e){return t!=null&&We(t,e,Ze)}function er(t,e,r,n){if(!F(t))return t;e=$(e,t);for(var o=-1,s=e.length,a=s-1,i=t;i!=null&&++o<s;){var f=Y(e[o]),h=r;if(f==="__proto__"||f==="constructor"||f==="prototype")return t;if(o!=a){var l=i[f];h=void 0,h===void 0&&(h=F(l)?l:nt(e[o+1])?[]:{})}oe(i,f,h),i=i[f]}return t}function rr(t,e,r){for(var n=-1,o=e.length,s={};++n<o;){var a=e[n],i=Ye(t,a);r(i,a)&&er(s,$(a,t),i)}return s}function nr(t,e){return rr(t,e,function(r,n){return tr(t,n)})}var ut=Ve(function(t,e){return t==null?{}:nr(t,e)});class or{constructor(e){this.i=0,this.string=e,this.whitespace=` 	\r
`,this.quotes=`'"`,this.escapes="\\",this.escapedQuotes='"',this.ansiCQuotes=!0,this.localeQuotes=!0,this.debug=!1}readChar(){return this.string.charAt(this.i++)}processEscapes(e,r,n){if(!n&&!this.escapedQuotes.includes(r))return e;const o="["+this.escapes.replace(/(.)/g,"\\$1")+"]";if(!n&&this.escapedQuotes.includes(r)){const s=new RegExp(o+"("+o+"|\\"+r+")","g");return e.replace(s,"$1")}if(n){const s={"([\\\\'\"?])":i=>i,a:()=>"\x07",b:()=>"\b","e|E":()=>"\x1B",f:()=>"\f",n:()=>`
`,r:()=>"\r",t:()=>"	",v:()=>"\v","([0-7]{1,3})":i=>String.fromCharCode(parseInt(i,8)),"x([0-9a-fA-F]{1,2})":i=>String.fromCharCode(parseInt(i,16)),"u([0-9a-fA-F]{1,4})":i=>String.fromCharCode(parseInt(i,16)),"U([0-9a-fA-F]{1,8})":i=>String.fromCharCode(parseInt(i,16)),"c(.)":i=>i==="?"?"":i==="@"?"\0":String.fromCharCode(i.charCodeAt(0)&31)},a=new RegExp(o+"("+Object.keys(s).join("|")+")","g");return e.replace(a,function(i,f){for(const h in s){const l=new RegExp("^"+h+"$").exec(f);if(l!==null)return s[h].apply(null,l.slice(1))}})}}*[Symbol.iterator](){let e=!1,r=!1,n=!1,o=-2,s;for(this.debug&&console.log("full input:",">"+this.string+"<");;){const a=this.i,i=this.readChar();if(this.debug&&console.log("position:",a,"input:",">"+i+"<","accumulated:",s,"inQuote:",e,"inDollarQuote:",r,"lastDollar:",o,"escaped:",n),i===""){if(e)throw new Error("Got EOF while in a quoted string");if(n)throw new Error("Got EOF while in an escape sequence");s!==void 0&&(yield s);return}if(n){i===`
`||(e?s=(s||"")+n+i:s=(s||"")+i),n=!1;continue}if(this.escapes.includes(i)&&(!e||r!==!1||this.escapedQuotes.includes(e))){n=i;continue}if(e!==!1){if(i===e){s=this.processEscapes(s,e,r==="'"),e=!1,r=!1;continue}s=(s||"")+i;continue}if(this.quotes.includes(i)){e=i,o===a-1&&(i==="'"&&!this.ansiCQuotes||i==='"'&&!this.localeQuotes||(r=i)),s=s||"",r!==!1&&(s=s.slice(0,-1));continue}if(e===!1&&i==="$"&&(o=a),this.whitespace.includes(i)){s!==void 0&&(yield s),s=void 0;continue}s=(s||"")+i}}}function sr(t){return Array.from(new or(t))}const ir=t=>{const e={};for(const[,r,n]of t.matchAll(/([a-z])[ \t]*(-?(?:\d+(?:\.\d+)?|\.\d+))?/gi))e[r.toLowerCase()]=n?+n:void 0;return e},ar=t=>{const e={};for(const r of sr(t)){const n=r.indexOf("="),o=r.substring(0,n),s=r.substring(n+1);e[o.toLowerCase()]=s}return e},lr=t=>{const e=t.trim().split(";",2)[0],[,r,n=""]=e.split(/^([gmt]\d+)\s*/i);if(r)return{type:"gcode",command:r.toUpperCase(),args:ir(n)};const[,o,s=""]=e.split(/^(SET_PRINT_STATS_INFO|EXCLUDE_OBJECT_DEFINE|SET_RETRACTION)\s+/i);return o?{type:"macro",command:o.toUpperCase(),args:ar(s)}:{type:"other"}},T=t=>Math.round(t*1e4)/1e4,cr=(t,e)=>{const r=[],n=[],o=[],s=new Set,a=t.split(`
`);let i=!1,f="relative",h="absolute";const l={x:0,y:0,z:0,e:0};let m=0,b=0;const v={x:{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},y:{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}},y={length:1,extrudeExtra:0,z:0};for(let C=0;C<a.length;C++){const{type:j,command:z,args:u}=lr(a[C])??{};let c=null;if(j==="macro")switch(z){case"SET_PRINT_STATS_INFO":"current_layer"in u&&(i=!0);break;case"EXCLUDE_OBJECT_DEFINE":if("polygon"in u&&u.polygon){const _={polygon:JSON.parse(u.polygon).map(([R,L])=>({x:R,y:L}))};o.push(_)}break;case"SET_RETRACTION":"retract_length"in u&&(y.length=+u.retract_length),"unretract_extra_length"in u&&(y.extrudeExtra=+u.unretract_extra_length);break}else if(j==="gcode"){switch(z){case"G0":case"G1":{const d=["x","y","z","e"];d.some(_=>_ in u)&&(c={...ut(u,d),tool:m,filePosition:b});break}case"G2":case"G3":{const d=["x","y","z","e","i","j","k","r"];d.some(_=>_ in u)&&(c={...ut(u,d),d:z==="G2"?"clockwise":"counter-clockwise",tool:m,filePosition:b});break}case"G10":c={e:-y.length,tool:m,filePosition:b},y.z!==0&&(c.z=T(l.z+y.z));break;case"G11":c={e:T(y.length+y.extrudeExtra),tool:m,filePosition:b},y.z!==0&&(c.z=T(l.z-y.z));break;case"G28":{const d="x"in u,_="y"in u,R="z"in u,L=!d&&!_&&!R;c={tool:m,filePosition:b},(d||L)&&(c.x=0),(_||L)&&(c.y=0),(R||L)&&(c.z=0);break}case"G90":h="absolute";case"M82":f="absolute",l.e=0;break;case"G91":h="relative";case"M83":f="relative";break;case"G92":f==="absolute"&&(l.e=u.e??l.e),h==="absolute"&&(l.x=u.x??l.x,l.y=u.y??l.y,l.z=u.z??l.z);break;case"M207":y.length=u.s??y.length,y.z=u.z??y.z;break;case"M600":s.add(0),m=(m+1)%10,s.add(m);break;default:z.startsWith("T")&&(m=+z.substring(1),s.add(m));break}if(c){if(f==="absolute"&&c.e!==void 0){const d=T(c.e-l.e);l.e=c.e,c.e=d}if(h==="relative"&&(c.x!==void 0&&(c.x=T(c.x+l.x)),c.y!==void 0&&(c.y=T(c.y+l.y)),c.z!==void 0&&(c.z=T(c.z+l.z))),i&&c.e&&c.e>0){const d=c;if(["x","y","i","j"].some(_=>ht(_,d)&&d[_]!==0)){const _={z:l.z,move:r.length-1,filePosition:b};n.push(_),i=!1}}l.x=c.x??l.x,l.y=c.y??l.y,l.z=c.z??l.z,r.push(c),n.length>0&&(v.x.min=Math.min(v.x.min,l.x),v.x.max=Math.max(v.x.max,l.x),v.y.min=Math.min(v.y.min,l.y),v.y.max=Math.max(v.y.max,l.y))}}C%Math.floor(a.length/100)===0&&e(b),b+=a[C].length+1}return e(b),{moves:r,layers:n,parts:o,bounds:n.length>0?v:null,tools:[...s].sort((C,j)=>C-j)}},g={fatal:0,error:0,warn:1,log:2,info:3,success:3,fail:3,debug:4,trace:5,verbose:Number.POSITIVE_INFINITY},ft={silent:{level:-1},fatal:{level:g.fatal},error:{level:g.error},warn:{level:g.warn},log:{level:g.log},info:{level:g.info},success:{level:g.success},fail:{level:g.fail},ready:{level:g.info},start:{level:g.info},box:{level:g.info},debug:{level:g.debug},trace:{level:g.trace},verbose:{level:g.verbose}};function q(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function B(t,e,r=".",n){if(!q(e))return B(t,{},r);const o=Object.assign({},e);for(const s in t){if(s==="__proto__"||s==="constructor")continue;const a=t[s];a!=null&&(Array.isArray(a)&&Array.isArray(o[s])?o[s]=[...a,...o[s]]:q(a)&&q(o[s])?o[s]=B(a,o[s],(r?`${r}.`:"")+s.toString()):o[s]=a)}return o}function ur(t){return(...e)=>e.reduce((r,n)=>B(r,n,""),{})}const fr=ur();function pr(t){return Object.prototype.toString.call(t)==="[object Object]"}function hr(t){return!(!pr(t)||!t.message&&!t.args||t.stack)}let J=!1;const pt=[];class p{options;_lastLog;_mockFn;constructor(e={}){const r=e.types||ft;this.options=fr({...e,defaults:{...e.defaults},level:K(e.level,r),reporters:[...e.reporters||[]]},{types:ft,throttle:1e3,throttleMin:5,formatOptions:{date:!0,colors:!1,compact:!0}});for(const n in r){const o={type:n,...this.options.defaults,...r[n]};this[n]=this._wrapLogFn(o),this[n].raw=this._wrapLogFn(o,!0)}this.options.mockFn&&this.mockTypes(),this._lastLog={}}get level(){return this.options.level}set level(e){this.options.level=K(e,this.options.types,this.options.level)}prompt(e,r){if(!this.options.prompt)throw new Error("prompt is not supported!");return this.options.prompt(e,r)}create(e){const r=new p({...this.options,...e});return this._mockFn&&r.mockTypes(this._mockFn),r}withDefaults(e){return this.create({...this.options,defaults:{...this.options.defaults,...e}})}withTag(e){return this.withDefaults({tag:this.options.defaults.tag?this.options.defaults.tag+":"+e:e})}addReporter(e){return this.options.reporters.push(e),this}removeReporter(e){if(e){const r=this.options.reporters.indexOf(e);if(r!==-1)return this.options.reporters.splice(r,1)}else this.options.reporters.splice(0);return this}setReporters(e){return this.options.reporters=Array.isArray(e)?e:[e],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(const e in this.options.types)console["__"+e]||(console["__"+e]=console[e]),console[e]=this[e].raw}restoreConsole(){for(const e in this.options.types)console["__"+e]&&(console[e]=console["__"+e],delete console["__"+e])}wrapStd(){this._wrapStream(this.options.stdout,"log"),this._wrapStream(this.options.stderr,"log")}_wrapStream(e,r){e&&(e.__write||(e.__write=e.write),e.write=n=>{this[r].raw(String(n).trim())})}restoreStd(){this._restoreStream(this.options.stdout),this._restoreStream(this.options.stderr)}_restoreStream(e){e&&e.__write&&(e.write=e.__write,delete e.__write)}pauseLogs(){J=!0}resumeLogs(){J=!1;const e=pt.splice(0);for(const r of e)r[0]._logFn(r[1],r[2])}mockTypes(e){const r=e||this.options.mockFn;if(this._mockFn=r,typeof r=="function")for(const n in this.options.types)this[n]=r(n,this.options.types[n])||this[n],this[n].raw=this[n]}_wrapLogFn(e,r){return(...n)=>{if(J){pt.push([this,e,n,r]);return}return this._logFn(e,n,r)}}_logFn(e,r,n){if((e.level||0)>this.level)return!1;const o={date:new Date,args:[],...e,level:K(e.level,this.options.types)};!n&&r.length===1&&hr(r[0])?Object.assign(o,r[0]):o.args=[...r],o.message&&(o.args.unshift(o.message),delete o.message),o.additional&&(Array.isArray(o.additional)||(o.additional=o.additional.split(`
`)),o.args.push(`
`+o.additional.join(`
`)),delete o.additional),o.type=typeof o.type=="string"?o.type.toLowerCase():"log",o.tag=typeof o.tag=="string"?o.tag:"";const s=(i=!1)=>{const f=(this._lastLog.count||0)-this.options.throttleMin;if(this._lastLog.object&&f>0){const h=[...this._lastLog.object.args];f>1&&h.push(`(repeated ${f} times)`),this._log({...this._lastLog.object,args:h}),this._lastLog.count=1}i&&(this._lastLog.object=o,this._log(o))};clearTimeout(this._lastLog.timeout);const a=this._lastLog.time&&o.date?o.date.getTime()-this._lastLog.time.getTime():0;if(this._lastLog.time=o.date,a<this.options.throttle)try{const i=JSON.stringify([o.type,o.tag,o.args]),f=this._lastLog.serialized===i;if(this._lastLog.serialized=i,f&&(this._lastLog.count=(this._lastLog.count||0)+1,this._lastLog.count>this.options.throttleMin)){this._lastLog.timeout=setTimeout(s,this.options.throttle);return}}catch{}s(!0)}_log(e){for(const r of this.options.reporters)r.log(e,{options:this.options})}}function K(t,e={},r=3){return t===void 0?r:typeof t=="number"?t:e[t]&&e[t].level!==void 0?e[t].level:r}p.prototype.add=p.prototype.addReporter,p.prototype.remove=p.prototype.removeReporter,p.prototype.clear=p.prototype.removeReporter,p.prototype.withScope=p.prototype.withTag,p.prototype.mock=p.prototype.mockTypes,p.prototype.pause=p.prototype.pauseLogs,p.prototype.resume=p.prototype.resumeLogs;function dr(t={}){return new p(t)}class gr{options;defaultColor;levelColorMap;typeColorMap;constructor(e){this.options={...e},this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c0392b",1:"#f39c12",3:"#00BCD4"},this.typeColorMap={success:"#2ecc71"}}_getLogFn(e){return e<1?console.__error||console.error:e===1?console.__warn||console.warn:console.__log||console.log}log(e){const r=this._getLogFn(e.level),n=e.type==="log"?"":e.type,o=e.tag||"",a=`
      background: ${this.typeColorMap[e.type]||this.levelColorMap[e.level]||this.defaultColor};
      border-radius: 0.5em;
      color: white;
      font-weight: bold;
      padding: 2px 0.5em;
    `,i=`%c${[o,n].filter(Boolean).join(":")}`;typeof e.args[0]=="string"?r(`${i}%c ${e.args[0]}`,a,"",...e.args.slice(1)):r(i,a,...e.args)}}function yr(t={}){return dr({reporters:t.reporters||[new gr({})],prompt(r,n={}){return n.type==="confirm"?Promise.resolve(confirm(r)):Promise.resolve(prompt(r))},...t})}const _r=yr(),mr=t=>{const e={action:"progress",filePosition:t};self.postMessage(e)},br=(t,e,r,n,o)=>{const s={action:"result",moves:t,layers:e,parts:r,tools:n,bounds:o};self.postMessage(s)},vr=t=>{const e={action:"error",error:t};self.postMessage(e)};self.onmessage=t=>{const e=t.data;try{if(e.action==="parse"){const r=new TextDecoder().decode(e.gcode),{moves:n,layers:o,parts:s,tools:a,bounds:i}=cr(r,mr);br(n,o,s,a,i)}}catch(r){_r.error("[ParseGcode] error in worker",r),vr(r)}}})();
